# Video RU Dubber

MVP —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ –∏ –æ–∑–≤—É—á–∫–∏ –≤–∏–¥–µ–æ –∏–∑ Twitter/X –∏ YouTube –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.

**‚ú® –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 100% —á–µ—Ä–µ–∑ OpenAI API –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞!**

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- ffmpeg (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –≤ —Å–∏—Å—Ç–µ–º–µ)
- OpenAI API –∫–ª—é—á ([–ø–æ–ª—É—á–∏—Ç—å –∑–¥–µ—Å—å](https://platform.openai.com/api-keys))

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ffmpeg

**macOS:**
```bash
brew install ffmpeg
```

**Ubuntu/Debian:**
```bash
sudo apt update && sudo apt install ffmpeg
```

**Windows:**
–°–∫–∞—á–∞—Ç—å —Å https://ffmpeg.org/download.html –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ PATH.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å (macOS/Linux)
source venv/bin/activate

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å (Windows)
venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenAI API

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cp .env.example .env
```

2. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à OpenAI API –∫–ª—é—á –≤ `.env`:
```bash
OPENAI_API_KEY=sk-proj-–í–ê–®_–ö–õ–Æ–ß_–ó–î–ï–°–¨
```

3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
```bash
# –ú–æ–¥–µ–ª—å –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ (default: gpt-4o-mini)
LLM_MODEL=gpt-4o-mini

# –ú–æ–¥–µ–ª—å TTS (default: tts-1, –∏–ª–∏ tts-1-hd –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞)
OPENAI_TTS_MODEL=tts-1

# –ì–æ–ª–æ—Å TTS (default: onyx - –≥–ª—É–±–æ–∫–∏–π –º—É–∂—Å–∫–æ–π)
# –î–æ—Å—Ç—É–ø–Ω—ã–µ: alloy, echo, fable, onyx, nova, shimmer
OPENAI_TTS_VOICE=onyx
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã OpenAI API:

```bash
python test_full_openai.py
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üéâ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´!

‚úÖ –í–∞—à –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 100% —á–µ—Ä–µ–∑ OpenAI API:
   ‚Ä¢ Whisper API - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
   ‚Ä¢ Chat API (gpt-4o-mini) - –ø–µ—Ä–µ–≤–æ–¥
   ‚Ä¢ TTS API - –æ–∑–≤—É—á–∫–∞
```

## –ó–∞–ø—É—Å–∫

```bash
uvicorn main:app --reload
```

–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000 –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ –∏–∑ Twitter/X –∏–ª–∏ YouTube
3. –ù–∞–∂–º–∏—Ç–µ "–ü–µ—Ä–µ–≤–µ—Å—Ç–∏"
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
5. –°–∫–∞—á–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## API Endpoints

- `POST /submit` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É
  - Body: `{"url": "https://..."}`
  - Response: `{"job_id": "uuid"}`

- `GET /status/{job_id}` - –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
  - Response: `{"status": "queued|downloading|transcribing|translating|dubbing|merging|done|error"}`

- `GET /result/{job_id}` - —Å–∫–∞—á–∞—Ç—å –≥–æ—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- `OPENAI_API_KEY` - –≤–∞—à OpenAI API –∫–ª—é—á

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

#### –ü–µ—Ä–µ–≤–æ–¥
- `LLM_MODEL` - –º–æ–¥–µ–ª—å –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ (default: `gpt-4o-mini`)
- `LLM_API_BASE` - –±–∞–∑–æ–≤—ã–π URL API (default: `https://api.openai.com/v1`)

#### –û–∑–≤—É—á–∫–∞ (TTS)
- `OPENAI_TTS_MODEL` - –º–æ–¥–µ–ª—å TTS (default: `tts-1`)
  - `tts-1` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (~$15/1M —Å–∏–º–≤–æ–ª–æ–≤)
  - `tts-1-hd` - –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (~$30/1M —Å–∏–º–≤–æ–ª–æ–≤)

- `OPENAI_TTS_VOICE` - –≥–æ–ª–æ—Å –¥–ª—è –æ–∑–≤—É—á–∫–∏ (default: `onyx`)
  - `alloy` - –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π
  - `echo` - –º—É–∂—Å–∫–æ–π
  - `fable` - –±—Ä–∏—Ç–∞–Ω—Å–∫–∏–π –∞–∫—Ü–µ–Ω—Ç
  - **`onyx`** - –≥–ª—É–±–æ–∫–∏–π –º—É–∂—Å–∫–æ–π ‚≠ê (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ)
  - `nova` - –∂–µ–Ω—Å–∫–∏–π
  - `shimmer` - –∂–µ–Ω—Å–∫–∏–π –º—è–≥–∫–∏–π

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
video-ru-dubber/
‚îú‚îÄ‚îÄ main.py                    # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–æ–∑–¥–∞–π—Ç–µ –∏–∑ .env.example)
‚îú‚îÄ‚îÄ .env.example               # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ test_full_openai.py        # –¢–µ—Å—Ç OpenAI API
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ downloader.py          # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ (yt-dlp)
‚îÇ   ‚îú‚îÄ‚îÄ transcriber.py         # –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (OpenAI Whisper API)
‚îÇ   ‚îú‚îÄ‚îÄ translator.py          # –ü–µ—Ä–µ–≤–æ–¥ EN‚ÜíRU (OpenAI Chat API)
‚îÇ   ‚îú‚îÄ‚îÄ tts.py                 # –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ (OpenAI TTS API)
‚îÇ   ‚îî‚îÄ‚îÄ merger.py              # –°–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ (ffmpeg)
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îî‚îÄ‚îÄ index.html             # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ jobs/                      # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∑–∞–¥–∞—á
‚îî‚îÄ‚îÄ outputs/                   # –ì–æ—Ç–æ–≤—ã–µ –≤–∏–¥–µ–æ
```

## Pipeline

1. **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ** - yt-dlp —Å–∫–∞—á–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ —Å Twitter/X –∏–ª–∏ YouTube
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ** - ffmpeg –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫—É
3. **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** - OpenAI Whisper API —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç –∞–Ω–≥–ª–∏–π—Å–∫—É—é —Ä–µ—á—å
4. **–ü–µ—Ä–µ–≤–æ–¥** - OpenAI Chat API (gpt-4o-mini) –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —Ä—É—Å—Å–∫–∏–π
5. **–û–∑–≤—É—á–∫–∞** - OpenAI TTS API –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä—É—Å—Å–∫—É—é –æ–∑–≤—É—á–∫—É
6. **–°–≤–µ–¥–µ–Ω–∏–µ** - ffmpeg –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –æ–∑–≤—É—á–∫—É –Ω–∞ –≤–∏–¥–µ–æ

## –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏

–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è –≤–∏–¥–µ–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é 3 –º–∏–Ω—É—Ç—ã:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|-----------|-----------|
| Whisper API (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ) | $0.018 (3 –º–∏–Ω √ó $0.006/–º–∏–Ω) |
| Chat API (–ø–µ—Ä–µ–≤–æ–¥) | $0.0001 (~1000 —Ç–æ–∫–µ–Ω–æ–≤) |
| TTS API (–æ–∑–≤—É—á–∫–∞) | $0.015 (~1000 —Å–∏–º–≤–æ–ª–æ–≤) |
| **–ò—Ç–æ–≥–æ** | **~$0.033** (~3 —Ä—É–±–ª—è) |

**–° TTS-1-HD** (–ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ): ~$0.048 (~4.5 —Ä—É–±–ª—è)

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ OpenAI API

‚úÖ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** - –ª—É—á—à–∏–µ AI –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚úÖ **–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞** - –Ω–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
‚úÖ **–ù–µ —Ç—Ä–µ–±—É–µ—Ç –º–æ—â–Ω–æ–≥–æ –∂–µ–ª–µ–∑–∞** - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–ª–∞–∫–µ
‚úÖ **–ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –æ–∑–≤—É—á–∫–∞** - –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ–ª–æ—Å–∞ TTS
‚úÖ **–¢–æ—á–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥** - –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —á–µ—Ä–µ–∑ GPT-4o-mini

## Troubleshooting

### –û—à–∏–±–∫–∞: "OPENAI_API_KEY not set"
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `.env` —Å–æ–∑–¥–∞–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞—à API –∫–ª—é—á.

### –û—à–∏–±–∫–∞: "Audio file is X MB (limit: 25 MB)"
OpenAI Whisper API –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç 25 MB –Ω–∞ —Ñ–∞–π–ª. –î–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –Ω—É–∂–Ω–æ —Å–∂–∏–º–∞—Ç—å –∞—É–¥–∏–æ.

### –û—à–∏–±–∫–∞ 429 (Rate Limit)
–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã –≤ OpenAI –∞–∫–∫–∞—É–Ω—Ç–µ.

### –û—à–∏–±–∫–∞ 401 (Unauthorized)
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π –Ω–∞ https://platform.openai.com/api-keys

## Roadmap

- [x] –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI API
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ RU‚ÜíEN –ø–µ—Ä–µ–≤–æ–¥–∞
- [ ] –í—ã–±–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ UI
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤
- [ ] –°–∂–∞—Ç–∏–µ –±–æ–ª—å—à–∏—Ö –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤ (>25 MB)
- [ ] –í—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞ TTS –≤ UI

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
